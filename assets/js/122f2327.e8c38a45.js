"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[7817],{3905:(e,a,t)=>{t.d(a,{Zo:()=>p,kt:()=>v});var n=t(7294);function r(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function o(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function l(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?o(Object(t),!0).forEach((function(a){r(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function i(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)t=o[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)t=o[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=n.createContext({}),u=function(e){var a=n.useContext(s),t=a;return e&&(t="function"==typeof e?e(a):l(l({},a),e)),t},p=function(e){var a=u(e.components);return n.createElement(s.Provider,{value:a},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},m=n.forwardRef((function(e,a){var t=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),c=u(t),m=r,v=c["".concat(s,".").concat(m)]||c[m]||d[m]||o;return t?n.createElement(v,l(l({ref:a},p),{},{components:t})):n.createElement(v,l({ref:a},p))}));function v(e,a){var t=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var o=t.length,l=new Array(o);l[0]=m;var i={};for(var s in a)hasOwnProperty.call(a,s)&&(i[s]=a[s]);i.originalType=e,i[c]="string"==typeof e?e:r,l[1]=i;for(var u=2;u<o;u++)l[u]=t[u];return n.createElement.apply(null,l)}return n.createElement.apply(null,t)}m.displayName="MDXCreateElement"},7178:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>s,contentTitle:()=>l,default:()=>d,frontMatter:()=>o,metadata:()=>i,toc:()=>u});var n=t(7462),r=(t(7294),t(3905));const o={title:"Ajouter Nova & helpers"},l=void 0,i={unversionedId:"laravel/Features/nova",id:"laravel/Features/nova",title:"Ajouter Nova & helpers",description:"Nova",source:"@site/docs/laravel/Features/nova.md",sourceDirName:"laravel/Features",slug:"/laravel/Features/nova",permalink:"/documentation/docs/laravel/Features/nova",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/laravel/Features/nova.md",tags:[],version:"current",frontMatter:{title:"Ajouter Nova & helpers"},sidebar:"laravelSidebar",previous:{title:"Ajouter Jquery",permalink:"/documentation/docs/laravel/Features/jquery"},next:{title:"Jolimardi/Laravel-menu",permalink:"/documentation/docs/laravel/Features/jm-menu"}},s={},u=[{value:"Nova",id:"nova",level:2},{value:"Ajouter le repo priv\xe9 et ses credentials",id:"ajouter-le-repo-priv\xe9-et-ses-credentials",level:3},{value:"Ensuite, installer Nova",id:"ensuite-installer-nova",level:3},{value:"Ajouter le premier utilisateur",id:"ajouter-le-premier-utilisateur",level:3},{value:"Important, ajouter les emails autoris\xe9s",id:"important-ajouter-les-emails-autoris\xe9s",level:2},{value:"Nova helpers",id:"nova-helpers",level:2},{value:"Gestion de field multi relationnel",id:"gestion-de-field-multi-relationnel",level:3},{value:"Utilisation commune",id:"utilisation-commune",level:4},{value:"Ajouter d&#39;autres langues pour Nova",id:"ajouter-dautres-langues-pour-nova",level:3},{value:"m-a-k-o/youtube-field",id:"m-a-k-oyoutube-field",level:3},{value:"Utilisation commune",id:"utilisation-commune-1",level:4},{value:"CKEditor",id:"ckeditor",level:3}],p={toc:u},c="wrapper";function d(e){let{components:a,...t}=e;return(0,r.kt)(c,(0,n.Z)({},p,t,{components:a,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"nova"},"Nova"),(0,r.kt)("h3",{id:"ajouter-le-repo-priv\xe9-et-ses-credentials"},"Ajouter le repo priv\xe9 et ses credentials"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'composer config repositories.nova \'{"type": "composer", "url": "https://nova.laravel.com"}\' --file composer.json\n')),(0,r.kt)("p",null,"Puis entrer ses credentials pour ne pas avoir \xe0 les entrer \xe0 chaque fois (adresse mail et cl\xe9 d'api), cette commande va ajouter auth.json \xe0 la racine avec les credentials (ne pas versionner ce fichier)."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"composer config http-basic.nova.laravel.com example@mail.com REMPLACER_PAR_NOVA_KEY\n")),(0,r.kt)("h3",{id:"ensuite-installer-nova"},"Ensuite, installer Nova"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"composer update --prefer-dist\nphp artisan nova:install\nphp artisan migrate\n")),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"}," Certaines configuration de database peuvent sortir une erreur ",(0,r.kt)("inlineCode",{parentName:"p"},"SQLSTATE[42000]: Syntax error or access violation: 1071 La cl\xe9 est trop longue.")," Dans ce cas, ajouter dans ",(0,r.kt)("inlineCode",{parentName:"p"},"app/Service/AppServiceProvider.php")," la ligne suivante dans la fonction boot :"),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-php"},"public function boot(): void {\n    Schema::defaultStringLength(191);\n}\n"))),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Assurez-vous d'avoir les bonnes infos de connexion \xe0 la base de donn\xe9es dans le fichier .env avant le ",(0,r.kt)("inlineCode",{parentName:"p"},"migrate"))),(0,r.kt)("h3",{id:"ajouter-le-premier-utilisateur"},"Ajouter le premier utilisateur"),(0,r.kt)("p",null,"Il faut maintenant ajouter un utilisateur pour pouvoir se connecter au dashboard nova (",(0,r.kt)("inlineCode",{parentName:"p"},"http://mon-url.com/nova"),") :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"php artisan nova:user\n")),(0,r.kt)("p",null,"Puis suivre les instructions (choix d'un nom, d'un email et d'un mot de passe pour cr\xe9er l'utilisateur)."),(0,r.kt)("h2",{id:"important-ajouter-les-emails-autoris\xe9s"},"Important, ajouter les emails autoris\xe9s"),(0,r.kt)("p",null,"Lorsque l'on n'est plus en environnement ",(0,r.kt)("inlineCode",{parentName:"p"},"local"),", Nova v\xe9rifie les adresses mail autoris\xe9es, en plus des Nova Users cr\xe9\xe9s. Pour cela, il faut ajouter les emails autoris\xe9s dans ",(0,r.kt)("inlineCode",{parentName:"p"},"app/Providers/NovaServiceProvider.php"),", dans la fonction ",(0,r.kt)("inlineCode",{parentName:"p"},"gate()")," :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php",metastring:'title="/app/Service/NovaServiceProvider.php"',title:'"/app/Service/NovaServiceProvider.php"'},"protected function gate(){\n    Gate::define('viewNova', function ($user) {\n        $authorized_emails_str = ENV('NOVA_AUTHORIZED_EMAILS', 'mon-email@gmail.com, deuxieme-email@gmail.com');\n        $authorized_emails = explode(',', $authorized_emails_str);\n        $authorized_emails = array_map('trim', $authorized_emails);\n        return in_array($user->email, $authorized_emails);\n    });\n}\n")),(0,r.kt)("p",null,"et en ajoutant dans le ",(0,r.kt)("inlineCode",{parentName:"p"},".env")," :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:'language-title="/.env"'},"NOVA_AUTHORIZED_EMAILS='mon-email@gmail.com, deuxieme-email@gmail.com'\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Pour plus de d\xe9tails sur Laravel nova, retrouvez la documentation officielle ici : ",(0,r.kt)("a",{parentName:"strong",href:"https://nova.laravel.com/docs/4.0/installation.html"},"https://nova.laravel.com/docs/4.0/installation.html"))),(0,r.kt)("h2",{id:"nova-helpers"},"Nova helpers"),(0,r.kt)("p",null,"Tout les packages concernant Nova."),(0,r.kt)("p",null,"Gestion de media avec : "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"composer require ebess/advanced-nova-media-library\n")),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"gestion-de-field-multi-relationnel"},"Gestion de field multi relationnel"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"composer require benjacho/belongs-to-many-field\n")),(0,r.kt)("h4",{id:"utilisation-commune"},"Utilisation commune"),(0,r.kt)("p",null,"Exemple : "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php",metastring:"title='app/Nova/Ma-resource.php'",title:"'app/Nova/Ma-resource.php'"},"use Benjacho\\BelongsToManyField\\BelongsToManyField;\n\n...\nclass MaResource extends Resource { \n    ...\n    public function fields(NovaRequest $request) {\n        ...\n        BelongsToManyField::make('Role Label', 'roles', 'App\\Nova\\Role')->optionsLabel('full_role_name'),\n        ...\n    }\n    ...\n}\n")),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"ajouter-dautres-langues-pour-nova"},"Ajouter d'autres langues pour Nova"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"composer require coderello/laravel-nova-lang\n")),(0,r.kt)("p",null,"Et "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"php artisan nova-lang:publish fr\n")),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"m-a-k-oyoutube-field"},"m-a-k-o/youtube-field"),(0,r.kt)("p",null,"Am\xe9liore la gestion vid\xe9o : "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"composer require m-a-k-o/youtube-field\n")),(0,r.kt)("h4",{id:"utilisation-commune-1"},"Utilisation commune"),(0,r.kt)("p",null,"Exemple : "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php",metastring:"title='app/Nova/Ma-resource.php'",title:"'app/Nova/Ma-resource.php'"},"use MAKO\\YoutubeField\\YoutubeField;\n\n...\nclass MaResource extends Resource { \n    ...\n    public function fields(NovaRequest $request) {\n        ...\n        YoutubeField::make('Vid\xe9o url', 'video_url')->hideFromIndex(),\n        ...\n    }\n    ...\n}\n")),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"ckeditor"},"CKEditor"),(0,r.kt)("p",null,"CKEditor est un editeur de texte dans Nova, son installation requiert un peu plus de travail, se rendre sur ",(0,r.kt)("a",{parentName:"p",href:"add-ckeditor"},'"Ajouter Nova CKEditor"')))}d.isMDXComponent=!0}}]);