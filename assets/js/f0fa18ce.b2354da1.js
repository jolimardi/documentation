"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[4731],{3905:(e,n,t)=>{t.d(n,{Zo:()=>c,kt:()=>h});var a=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var l=a.createContext({}),p=function(e){var n=a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},c=function(e){var n=p(e.components);return a.createElement(l.Provider,{value:n},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},m=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),d=p(t),m=r,h=d["".concat(l,".").concat(m)]||d[m]||u[m]||o;return t?a.createElement(h,s(s({ref:n},c),{},{components:t})):a.createElement(h,s({ref:n},c))}));function h(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=t.length,s=new Array(o);s[0]=m;var i={};for(var l in n)hasOwnProperty.call(n,l)&&(i[l]=n[l]);i.originalType=e,i[d]="string"==typeof e?e:r,s[1]=i;for(var p=2;p<o;p++)s[p]=t[p];return a.createElement.apply(null,s)}return a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},7188:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>p});var a=t(7462),r=(t(7294),t(3905));const o={title:"Vite.js & app.js"},s=void 0,i={unversionedId:"laravel/Installation/StepByStep/vite-app",id:"laravel/Installation/StepByStep/vite-app",title:"Vite.js & app.js",description:"Vite.js est le builder js utilis\xe9 par Laravel. Cela permet d'ajouter des plugins au projet via npm, de compiler les assets (js, scss, images...) et de live-reload les pages pendant le dev.",source:"@site/docs/laravel/Installation/StepByStep/vite-app.md",sourceDirName:"laravel/Installation/StepByStep",slug:"/laravel/Installation/StepByStep/vite-app",permalink:"/documentation/docs/laravel/Installation/StepByStep/vite-app",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/laravel/Installation/StepByStep/vite-app.md",tags:[],version:"current",frontMatter:{title:"Vite.js & app.js"},sidebar:"laravelSidebar",previous:{title:"Layout Principal",permalink:"/documentation/docs/laravel/Installation/StepByStep/layout-principal"},next:{title:"Routes et Base Controller",permalink:"/documentation/docs/laravel/Installation/StepByStep/route-controller"}},l={},p=[{value:"Compilation CSS avec Vite.js",id:"compilation-css-avec-vitejs",level:2},{value:"Chargement des assets dans le HTML avec Vite.js",id:"chargement-des-assets-dans-le-html-avec-vitejs",level:2}],c={toc:p},d="wrapper";function u(e){let{components:n,...t}=e;return(0,r.kt)(d,(0,a.Z)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Vite.js est le builder js utilis\xe9 par Laravel. Cela permet d'ajouter des plugins au projet via ",(0,r.kt)("inlineCode",{parentName:"p"},"npm"),", de compiler les assets (js, scss, images...) et de live-reload les pages pendant le dev."),(0,r.kt)("h2",{id:"compilation-css-avec-vitejs"},"Compilation CSS avec Vite.js"),(0,r.kt)("p",null,"Installation de quelques plugins pour PostCSS, PostCSS-Nesting et Autoprefixer"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm install postcss --save-dev\nnpm install postcss-nesting --save-dev\nnpm install autoprefixer --save-dev\n")),(0,r.kt)("p",null,"Puis configuration \xe0 la racine du projet, dans ",(0,r.kt)("inlineCode",{parentName:"p"},"vite.config.js")," :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="/vite.config.js"',title:'"/vite.config.js"'},"import { defineConfig } from 'vite';\nimport laravel from 'laravel-vite-plugin';\n\n// CSS\nimport postcssNesting from 'postcss-nesting';\nimport autoprefixer from 'autoprefixer';\n\nexport default defineConfig({\n    plugins: [\n        laravel({\n            input: ['resources/css/app.css', 'resources/js/app.js'], // Ajouter ici les ressources \xe0 compiler\n            refresh: true,\n        }),\n    ],\n    css: {\n        postcss: {\n            plugins: [\n                postcssNesting,\n                autoprefixer\n            ],\n            map: { inline: true }\n        },\n    },\n});\n")),(0,r.kt)("h2",{id:"chargement-des-assets-dans-le-html-avec-vitejs"},"Chargement des assets dans le HTML avec Vite.js"),(0,r.kt)("p",null,"Il faut ensuite charger ces fichiers compil\xe9s dans le Layout blade principal ",(0,r.kt)("inlineCode",{parentName:"p"},"/ressources/views/layout.blade.php")," grace \xe0 la directive sp\xe9ciale ",(0,r.kt)("inlineCode",{parentName:"p"},"@vite"),"."),(0,r.kt)("p",null,"Par exemple, pour les deux fichiers pr\xe9sents dans le ",(0,r.kt)("inlineCode",{parentName:"p"},"input")," de ",(0,r.kt)("inlineCode",{parentName:"p"},"vite.config.js")," ci-dessus, on peut les charger dans le ",(0,r.kt)("inlineCode",{parentName:"p"},"<head>")," avec ",(0,r.kt)("inlineCode",{parentName:"p"},"@vite('resources/css/app.css')")," et ",(0,r.kt)("inlineCode",{parentName:"p"},"@vite('resources/css/app.js')"),". Ca remplace le ",(0,r.kt)("inlineCode",{parentName:"p"},"<style src=...></style>")," pour permettre le live reload pendant le dev, le changement de nom \xe0 chaque nouveau build (\xe9vite d'avoir de vieux fichiers obsol\xe8tes en cache) etc."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html",metastring:'title="/ressources/views/layout.blade.php"',title:'"/ressources/views/layout.blade.php"'},"<head>\n    <meta charset=\"utf-8\">\n    <title>{{ $title ?? env('APP_NAME') }}</title>\n    <meta name=\"description\" content=\"{{ $description }}\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n    \n    ...\n\n    {{-- Chargement du CSS --}}\n    // highlight-start\n    @vite('resources/css/app.css')\n    // highlight-end\n\n    @stack('styles')\n\n    @stack('js_vars')\n</head>\n<body>\n\n    ...\n\n    {{-- Chargement des js --}}\n    // highlight-start\n    @vite('resources/js/app.js')\n    // highlight-end\n</body>\n")),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Pour ajouter de nouveaux fichiers CSS au projet projet, vous pouvez soit les ajouter dans ",(0,r.kt)("inlineCode",{parentName:"p"},"vite.config.js"),", soit dans le fichier CSS de base (",(0,r.kt)("inlineCode",{parentName:"p"},"resources/css/app.css")," par exemple) avec un ",(0,r.kt)("inlineCode",{parentName:"p"},'@import "../../node_modules/@fancyapps/ui/dist/fancybox/fancybox.css";')," par exemple.")),(0,r.kt)("h1",{id:"js-commun-\xe0-tous-les-sites-jolimardi"},"JS commun \xe0 tous les sites JoliMardi"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="/ressources/js/app.js"',title:'"/ressources/js/app.js"'},"import './bootstrap';\n\n/* ---------------    ci-dessous : JS commun \xe0 tous les sites, \xe0 d\xe9placer   ---------------------- */\n\n$(function () {\n\n    //--------- Menu mobile ------------*/\n    $('.menu-bars, .menu-close, .home-menu-bars, .mobile-menu .menu a, .menu-overlay').click(function (e) {\n        e.stopPropagation();\n        $('body').toggleClass('mobile-menu-opened');\n    });\n\n\n    // Click on card [data-href]\n    $('[data-href]').on('click', function (e) {\n        if (!$(e.target).is('a, a *, .dropdown, .dropdown *')) {\n            e.preventDefault();\n            window.location = $(this).data('href');\n        }\n    });\n\n\n    /* ---------     Custom Scroll To (add data-anchor=#id)   ------------------------ */\n    $('[data-anchor]').on('click', function (e) {\n        var anchor = $(this).data('anchor');\n        if (anchor.charAt(0) != '#') {\n            anchor = '#' + anchor;\n        }\n        if ($(anchor).length > 0) {\n            myScrollTo(anchor); // D\xe9finie en bas du fichier\n        }\n    });\n    /* ----------------------------    Scroll To si hash    ------------------------ */\n    if (window.location.hash) {\n        var anchor = window.location.hash;\n        myScrollTo(anchor);\n        scrollAction();\n    }\n\n    /* --------- Scroll ------------- */\n    function scrollAction() {\n        var scrollPos = $(window).scrollTop();\n        if (scrollPos > 200) {\n            $('body').addClass('topbar-small');\n        } else {\n            $('body').removeClass('topbar-small');\n        }\n    }\n    $(window).on('scroll', throttle(scrollAction, 40));\n    $(window).on('load', scrollAction);\n});\n\n\nfunction myScrollTo(anchor) {\n    var $elem;\n    if (anchor instanceof jQuery) {\n        $elem = anchor;\n    } else {\n        var id = anchor;\n        $elem = $(id);\n    }\n    if ($elem.length == 0) {\n        return;\n    }\n    $(\"html, body\").animate({ scrollTop: $elem.offset().top - 75 }, 200);\n}\n\n\n \n\n// Avoid `console` errors in browsers that lack a console.\n(function () {\n    var method;\n    var noop = function () {};\n    var methods = [\n        'assert', 'clear', 'count', 'debug', 'dir', 'dirxml', 'error',\n        'exception', 'group', 'groupCollapsed', 'groupEnd', 'info', 'log',\n        'markTimeline', 'profile', 'profileEnd', 'table', 'time', 'timeEnd',\n        'timeline', 'timelineEnd', 'timeStamp', 'trace', 'warn'\n    ];\n    var length = methods.length;\n    var console = (window.console = window.console || {});\n\n    while (length--) {\n        method = methods[length];\n\n        // Only stub undefined methods.\n        if (!console[method]) {\n            console[method] = noop;\n        }\n    }\n}());\n\n\nfunction throttle(fn, threshhold, scope) {\n    threshhold || (threshhold = 250);\n    var last,\n            deferTimer;\n    return function () {\n        var context = scope || this;\n        var now = +new Date,\n                args = arguments;\n        if (last && now < last + threshhold) {\n            // hold on to it\n            clearTimeout(deferTimer);\n            deferTimer = setTimeout(function () {\n                last = now;\n                fn.apply(context, args);\n            }, threshhold);\n        } else {\n            last = now;\n            fn.apply(context, args);\n        }\n    };\n}\n")))}u.isMDXComponent=!0}}]);